<!doctype html><html lang="ru"><head><meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Вход</title>
<style>body{margin:0;font-family:system-ui,Segoe UI,Inter,Roboto,sans-serif;background:#0b1220;color:#e5e7eb;display:grid;place-items:center;height:100vh}
.card{width:min(420px,92vw);background:#0f172a;border:1px solid #334155;border-radius:14px;padding:18px}
h2{margin:0 0 12px 0}input{width:100%;margin:6px 0 10px;background:#0b1220;color:#e5e7eb;border:1px solid #334155;border-radius:10px;padding:10px}
button{width:100%;background:#10b981;border:none;color:white;border-radius:10px;padding:10px;cursor:pointer}
.err{color:#fecaca;margin:6px 0 0}</style></head>
<body><div class="card"><h2>Вход</h2>
<input id="email" placeholder="email" autocomplete="username"/>
<input id="pass" placeholder="пароль" type="password" autocomplete="current-password"/>
<button id="go">Войти</button><div class="err" id="err"></div></div>
<script>
const $=s=>document.querySelector(s);
$("#go").onclick=async()=>{
  const email=$("#email").value.trim(), password=$("#pass").value; $("#err").textContent="";
  try{
    const r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email,password})});
    const j=await r.json(); if(!r.ok) throw new Error(j.error||r.statusText);
    window.opener?.postMessage({type:"auth",token:j.token,user:j.user}, window.location.origin);
    window.close();
  }catch(e){ $("#err").textContent=e.message||"Ошибка входа"; }
};
</script></body></html>
